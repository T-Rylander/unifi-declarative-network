# config/vlans.yaml — FINAL USG-3P-COMPLIANT v3.0
# 25 November 2025 — Travis + Grok + Leo

vlans:
  "1":
    name: unifi-management
    purpose: UniFi Controller, Cloud Key, APs, Switches — adoption & management plane
    subnet: 10.0.1.0/24
    gateway: 10.0.1.1
    vlan_id: 1
    vlan_enabled: true
    networkgroup: LAN
    domain_name: rylan.home
    dhcp_enabled: true
    dhcp_start: 10.0.1.100
    dhcp_stop: 10.0.1.200
    dhcp_lease: 86400
    dhcp_dns: [10.0.10.10]
    igmp_snooping: true
    multicast_dns: true
    enabled: true
    notes: |
      Required default LAN on USG-3P.
      UniFi Controller lives here at 10.0.1.20 (macvlan).
      All network gear adopts from VLAN 1.

  "10":
    name: servers-infra
    purpose: rylan-dc, AI workstation, monitoring, NFS, FreePBX
    subnet: 10.0.10.0/24
    gateway: 10.0.10.1
    vlan_id: 10
    vlan_enabled: true
    networkgroup: LAN
    domain_name: rylan.home
    dhcp_enabled: true
    dhcp_start: 10.0.10.100
    dhcp_stop: 10.0.10.249
    dhcp_lease: 86400
    dhcp_dns: [10.0.10.10]
    igmp_snooping: true
    multicast_dns: true
    enabled: true

  "30":
    name: trusted-users
    purpose: Workstations, laptops, osTicket Pi5
    subnet: 10.0.30.0/24
    gateway: 10.0.30.1
    vlan_id: 30
    vlan_enabled: true
    networkgroup: LAN
    domain_name: rylan.home
    dhcp_enabled: true
    dhcp_start: 10.0.30.100
    dhcp_stop: 10.0.30.249
    dhcp_lease: 86400
    dhcp_dns: [10.0.10.10, 1.1.1.1]
    igmp_snooping: false
    multicast_dns: true
    enabled: true

  "40":
    name: voip-critical
    purpose: FreePBX + Grandstream phones
    subnet: 10.0.40.0/27
    gateway: 10.0.40.1
    vlan_id: 40
    vlan_enabled: true
    networkgroup: LAN
    domain_name: rylan.home
    dhcp_enabled: true
    dhcp_start: 10.0.40.10
    dhcp_stop: 10.0.40.30
    dhcp_lease: 86400
    dhcp_dns: [10.0.10.10]
    dhcp_options:
      - option: 66
        value: 10.0.40.5
      - option: 160
        value: http://10.0.40.5/prov
    lldp_med_enabled: true
    qos:
      uplink_priority: 7
      downlink_priority: 7
      dscp_marking: 46
    enabled: true
  "90":
    name: guest-iot
    purpose: Guest WiFi and IoT devices - isolated from trusted networks
    subnet: 10.0.90.0/24
    gateway: 10.0.90.1
    vlan_id: 90
    vlan_enabled: true
    networkgroup: LAN
    domain_name: guest.rylan.home
    dhcp_enabled: true
    dhcp_start: 10.0.90.100
    dhcp_stop: 10.0.90.250
    dhcp_lease: 3600
    dhcp_dns: [1.1.1.1, 1.0.0.1]
    igmp_snooping: false
    multicast_dns: false
    ipv6_interface_type: none
    enabled: true
    notes: Guest and IoT isolation - no access to other VLANs

  'legacy':
    name: 'legacy-corporate'
    purpose: 'Temporary bootstrap (192.168.1.0/24) - delete post-migration'
    subnet: '192.168.1.0/24'
    gateway: '192.168.1.1'
    vlan_id: 0  # No VLAN ID for untagged legacy
    vlan_enabled: false
    networkgroup: 'LAN'
    domain_name: 'rylan.home'
    dhcp_enabled: true
    dhcp_start: '192.168.1.100'
    dhcp_stop: '192.168.1.200'
    dhcp_lease: 86400
    dhcp_dns: ['192.168.1.1', '1.1.1.1']
    igmp_snooping: false
    multicast_dns: true
    enabled: true
    notes: 'Safety net - manual delete after all devices migrated'
